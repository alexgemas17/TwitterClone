(this.webpackJsonptwitterclone=this.webpackJsonptwitterclone||[]).push([[0],{35:function(e,t,a){e.exports=a(55)},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(19),l=a.n(r),i=a(3),s=a(12),o=a(14),m=a.n(o);a(44),a(48);m.a.initializeApp({apiKey:"AIzaSyCYDK5HWgZiMGe_UOk5H6QiBK88TJ8X2Ss",authDomain:"twitter-clone-3407a.firebaseapp.com",databaseURL:"https://twitter-clone-3407a.firebaseio.com",projectId:"twitter-clone-3407a",storageBucket:"twitter-clone-3407a.appspot.com",messagingSenderId:"459828175983",appId:"1:459828175983:web:26f2517cdb4b7037f6999a",measurementId:"G-S72ZFP5TSL"});var u=m.a.firestore(),d=new m.a.auth.GoogleAuthProvider,p=new m.a.auth.GithubAuthProvider,E=a(5),f=a(2),h=a(22),N=a(9),v=a.n(N),w=function(e){var t=e.isAuthenticated,a=e.component,n=Object(h.a)(e,["isAuthenticated","component"]);return c.a.createElement(f.b,Object.assign({},n,{component:function(e){return t?c.a.createElement(f.a,{to:"/"}):c.a.createElement(a,e)}}))};w.prototype={isAuthenticated:v.a.bool.isRequired,component:v.a.func.isRequired};var b=function(e){var t=e.isAuthenticated,a=e.component,n=Object(h.a)(e,["isAuthenticated","component"]);return c.a.createElement(f.b,Object.assign({},n,{component:function(e){return t?c.a.createElement(a,e):c.a.createElement(f.a,{to:"/login"})}}))};b.prototype={isAuthenticated:v.a.bool.isRequired,component:v.a.func.isRequired};var g=a(4),U=a.n(g),y=a(11),D="[Auth] login",O="[Auth] logout",T="[Tweets] New tweet",j="[Tweets] Add new",R="[Tweets] Add tweets to timeline",L="[Timeline] Loading timeline",x="[Timeline] clean timeline data",I=function(){var e=Object(y.a)(U.a.mark((function e(t,a){var n,c,r,l,i,s,o;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.time,e.next=3,u.collection("tweets").add(a);case 3:return c=e.sent,r=c.id,e.next=7,u.collection("users/".concat(t,"/Tweets")).add({tweetID:r,type:"Tweet",time:n});case 7:return l=e.sent,i=l.id,u.collection("users/".concat(t,"/Tweets")).doc(i).update({uid:i}),e.next=12,u.collection("users/".concat(t,"/Timeline")).add({tweetID:r,type:"Tweet",time:n});case 12:return s=e.sent,o=s.id,u.collection("users/".concat(t,"/Timeline")).doc(o).update({uid:o}),u.collection("users/".concat(t,"/Followers")).get().then((function(e){e.forEach(function(){var e=Object(y.a)(U.a.mark((function e(t){var a,c,l;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data(),console.log(a),e.next=4,u.collection("users/".concat(a.userID,"/Timeline")).add({tweetID:r,type:"Tweet",time:n});case 4:c=e.sent,l=c.id,u.collection("users/".concat(a.userID,"/Timeline")).doc(l).update({uid:l});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})).catch((function(e){console.log("Error getting documents: ",e)})),e.abrupt("return",!0);case 17:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),k=function(e,t,a,n,c){return{type:T,payload:{userName:e,userDisplayName:t,photoUserURL:a,photoURL:n,textBody:c}}},S=function(e,t,a,n,c,r){return{type:j,payload:{tweetUID:e,userName:t,userDisplayName:a,photoUserURL:n,photoURL:c,textBody:r}}},A=function(){return{type:x}},C=function(e,t,a,n){return{type:D,payload:{uid:e,userName:t,displayName:a,photoURL:n}}},P=function(){return{type:O}},B=function(){return c.a.createElement("div",{className:"logo-container"},c.a.createElement("i",{className:"fab fa-twitter"}))},_=(a(52),function(){var e=Object(i.b)();return c.a.createElement("div",{className:"login"},c.a.createElement("div",{className:"LeftSide"},c.a.createElement("i",{className:"fab fa-twitter logoBackground"}),c.a.createElement("div",null,c.a.createElement("div",{className:"text-item"},c.a.createElement("i",{className:"fas fa-search"}),c.a.createElement("span",null," Sigue lo que te interesa. ")),c.a.createElement("div",{className:"text-item"},c.a.createElement("i",{className:"fas fa-user-friends"}),c.a.createElement("span",null," Ent\xe9rate de qu\xe9 est\xe1 hablando la gente. ")),c.a.createElement("div",{className:"text-item"},c.a.createElement("i",{className:"fas fa-comments"}),c.a.createElement("span",null," \xdanete a la conversaci\xf3n. ")))),c.a.createElement("div",{className:"RightSide"},c.a.createElement("div",{className:"Header"},c.a.createElement("div",{className:"logo"},c.a.createElement(B,null)),c.a.createElement("h1",null,"Mira lo que est\xe1 pasando en el mundo en este momento")),c.a.createElement("div",{className:"social-networks"},c.a.createElement("p",null," ",c.a.createElement("b",null,"Login with:")),c.a.createElement("div",{className:"btn-login github",role:"button",alt:"github icon",name:"btn-github",onClick:function(){e((function(e){m.a.auth().signInWithPopup(p).then((function(t){var a=t.user,n=a.email.split("@")[0];u.collection("users").doc(a.uid).get().then((function(e){if(!e.exists){var t={displayName:a.displayName,userName:n,photoURL:a.photoURL,email:a.email,likes:0,tweets:0,description:0};u.collection("users").doc(a.uid).set(t)}})),e(C(a.uid,n,a.displayName,a.photoURL))}))}))}},c.a.createElement("div",{className:"icon-wrapper"},c.a.createElement("img",{className:"google-icon",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/9/91/Octicons-mark-github.svg/1024px-Octicons-mark-github.svg.png",alt:"github icon"})),c.a.createElement("p",{className:"btn-text"},c.a.createElement("b",null,"Sign in with Github"))),c.a.createElement("div",{className:"btn-login linkedin",role:"button",alt:"linkedin icon",name:"btn-github",onClick:function(){e((function(e){m.a.auth().signInWithPopup(d).then((function(t){var a=t.user,n=a.email.split("@")[0];u.collection("users").doc(a.uid).get().then((function(e){if(!e.exists){var t={displayName:a.displayName,userName:n,photoURL:a.photoURL,email:a.email,likes:0,tweets:0,description:0};u.collection("users").doc(a.uid).set(t)}})),e(C(a.uid,n,a.displayName,a.photoURL))}))}))}},c.a.createElement("div",{className:"icon-wrapper"},c.a.createElement("img",{className:"google-icon",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Google_%22G%22_Logo.svg/1200px-Google_%22G%22_Logo.svg.png",alt:"linkedin icon"})),c.a.createElement("p",{className:"btn-text"},c.a.createElement("b",null,"Sign in with Google"))))))}),G=function(){var e=Object(f.g)(),t=Object(n.useState)(""),a=Object(s.a)(t,2),r=a[0],l=a[1];return c.a.createElement("div",{className:"Explorer"},c.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.push("/".concat(r))}},c.a.createElement("div",{className:"searchbar"},c.a.createElement("input",{name:"search",placeholder:"Buscar en Twitter",value:r,onChange:function(e){l(e.target.value)}}))))},M=function(){var e=Object(i.c)((function(e){return e.authReducer})).UserData;return c.a.createElement("div",{className:"UserInfo"},c.a.createElement("div",{className:"UserPhoto"},c.a.createElement("img",{src:e.PhotoURL,alt:"User foto"})),c.a.createElement("div",{className:"UserData"},c.a.createElement("p",{className:"UserName"},e.DisplayName),c.a.createElement("p",{className:"UserID"},"@",e.UserName)),c.a.createElement("div",{className:"UserMoreOption"},c.a.createElement("i",{className:"fas fa-chevron-circle-down"})))},q=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.authReducer})).UserData,a={color:"rgb(29, 161, 242)"};return c.a.createElement("div",{className:"menu-container"},c.a.createElement(E.c,{exact:!0,to:"/",activeStyle:a},c.a.createElement("div",{className:"menu-item"},c.a.createElement("span",null,c.a.createElement("i",{className:"fas fa-home"})," Inicio "))),c.a.createElement("div",{className:"menu-item"},c.a.createElement("span",null,c.a.createElement("i",{className:"far fa-envelope"})," Mensajes ")),c.a.createElement("div",{className:"menu-item"},c.a.createElement("span",null,c.a.createElement("i",{className:"far fa-bookmark"})," Guardados ")),c.a.createElement(E.c,{to:"".concat(t.UserName),activeStyle:a},c.a.createElement("div",{className:"menu-item"},c.a.createElement("span",null,c.a.createElement("i",{className:"far fa-user"})," Perfil "))),c.a.createElement("div",{className:"menu-item",role:"button",alt:"more option botton",onClick:function(){e(function(){var e=Object(y.a)(U.a.mark((function e(t){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.auth().signOut();case 2:t(P()),t(A());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},c.a.createElement("span",null,c.a.createElement("i",{className:"fas fa-sign-out-alt flip"})," Logout ")))},F=function(){var e=function(){var e=Object(y.a)(U.a.mark((function e(){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:"Navbar"},c.a.createElement(B,null),c.a.createElement(q,null),c.a.createElement("div",{className:"button-tuit",onClick:e},c.a.createElement("span",{className:"btn-primary"},"Twittear")),c.a.createElement(M,null))},H=(a(53),function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.authReducer})).UserData,a=Object(n.useState)(""),r=Object(s.a)(a,2),l=r[0],o=r[1];return c.a.createElement("div",{className:"tweet-container"},c.a.createElement("div",{className:"tweet-input"},c.a.createElement("div",{className:"TweetInputPhoto"},c.a.createElement("img",{src:t.PhotoURL,type:"text",alt:"User foto"})),c.a.createElement("textarea",{type:"text",name:"textareatweet",placeholder:"\xbfQu\xe9 est\xe1 pasando?",value:l,onChange:function(e){o(e.target.value)}})),c.a.createElement("div",{className:"tweet-buttons"},c.a.createElement("div",{className:"tweet-btn",type:"button",onClick:function(){var a,n,c,r,i,s;e((a=t.UID,n=t.UserName,c=t.DisplayName,r=t.PhotoURL,i="",s=l,function(){var e=Object(y.a)(U.a.mark((function e(t){var l;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l={userName:n,userDisplayName:c,photoUserURL:r,photoURL:i,textBody:s,time:(new Date).getTime()},I(a,l)&&t(k(n,c,r,i,s));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),o("")}},c.a.createElement("span",null,"Twittear"))))}),J=function(){return c.a.createElement("div",{className:"HeaderTimeline"},c.a.createElement("h3",null," Tweets m\xe1s recientes "))},K=function(e){var t=e.tweet;return c.a.createElement("div",{className:"Tweet-wrapper"},c.a.createElement("div",{className:"TweetContainer"},c.a.createElement("div",{className:"TweetPhoto"},c.a.createElement(E.b,{to:"/".concat(t.userName)},c.a.createElement("img",{src:t.photoUserURL,alt:"User foto"}))),c.a.createElement("div",{className:"TweetData"},c.a.createElement("div",{className:"TweetInfoUser"},c.a.createElement("p",{className:"UserName"},t.userDisplayName),c.a.createElement("p",{className:"UserID"},"@",t.userName)),c.a.createElement("p",null,t.textBody)),c.a.createElement("div",{className:"TweetMoreOption"},c.a.createElement("i",{className:"fas fa-ellipsis-h"}))),t.photoURL&&c.a.createElement("div",{className:"TweetImage"},c.a.createElement("img",{src:t.photoURL,alt:"User foto"})),c.a.createElement("div",{className:"SocialMedia"},c.a.createElement("i",{className:"fas fa-retweet TweetMedia Retweet"}),c.a.createElement("i",{className:"far fa-heart TweetMedia Like"}),c.a.createElement("i",{className:"far fa-comment TweetMedia Comment"}),c.a.createElement("i",{className:"far fa-share-square TweetMedia Share"})))},W=function(e){var t=e.UserDataUID,a=e.CollectionFromDB,r=Object(i.b)(),l=Object(i.c)((function(e){return e.tweetReducer})).timeline;return console.log(l),Object(n.useEffect)((function(){u.collection("users/".concat(t,"/").concat(a)).onSnapshot((function(e){e.docChanges().length>0&&r(function(e,t){return function(){var a=Object(y.a)(U.a.mark((function a(n){return U.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.collection("users/".concat(e,"/").concat(t)).orderBy("time").limit(50).get().then((function(e){e.forEach((function(e){if(e.exists){var t=e.data().uid;u.collection("tweets").doc(e.data().tweetID).get().then((function(e){var a=e.data();n(S(t,a.userName,a.userDisplayName,a.photoUserURL,a.photoURL,a.textBody))}))}}))}));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(t,a))}))}),[t,a,l,r]),c.a.createElement("div",{className:"TimelineList"},l.map((function(e,t){return c.a.createElement(K,{key:t,tweet:e})})))},X=function(){var e=Object(i.c)((function(e){return e.authReducer})).UserData;return c.a.createElement("div",{className:"Timeline"},c.a.createElement(J,null),c.a.createElement(H,null),c.a.createElement("hr",null),c.a.createElement(W,{UserDataUID:e.UID,CollectionFromDB:"Timeline"}))},z=function(e){var t=e.user;return c.a.createElement("div",{className:"UserHeader"},c.a.createElement("div",null,c.a.createElement(E.b,{to:"/"},c.a.createElement("i",{className:"fas fa-arrow-left"}))),t&&c.a.createElement("div",null,c.a.createElement("p",null," ",t.DisplayName),c.a.createElement("p",{className:"subtitle"}," ",t.Likes," tweets ")))},Q=function(){var e=Object(n.useState)({}),t=Object(s.a)(e,2),a=t[0],r=t[1],l=Object(f.h)().pathname.split("/")[1];return Object(n.useEffect)((function(){var e=u.collection("users").where("userName","==","".concat(l));console.log(e),e.get().then((function(e){r(void 0),e.forEach((function(e){var t=e.data();r({UserUID:e.id,DisplayName:t.displayName,UserName:t.userName,PhotoURL:t.photoURL,Likes:t.likes,Tweets:t.tweets,Description:t.description})}))})).catch((function(e){console.log("Error getting documents: ",e)}))}),[l]),a?c.a.createElement("div",{className:"Timeline"},c.a.createElement(z,{user:a}),c.a.createElement("div",{className:"header_photo"},c.a.createElement("div",{className:"User"},c.a.createElement("img",{src:a.PhotoURL,alt:"user"})),c.a.createElement("img",{src:"./imgs/header_photo.png",alt:"header"})),c.a.createElement("div",{className:"UserText"},c.a.createElement("div",{className:"Info"},c.a.createElement("h2",{className:"DisplayName"},a.DisplayName),c.a.createElement("p",{className:"NameID"},"@",a.UserName)),c.a.createElement("p",{className:"description"},a.Description)),c.a.createElement("div",{className:"TweetBarHeader"},c.a.createElement("h3",null," Tweets ")),c.a.createElement(W,{UserDataUID:a.UserUID,CollectionFromDB:"Tweets"})):c.a.createElement("div",{className:"Timeline"},c.a.createElement(z,{user:void 0}),c.a.createElement("div",{className:"ErrorSearch"},c.a.createElement("h1",null," Usuario no encontrado :( ")))},Z=function(){return c.a.createElement("div",{className:"main-wrapper"},c.a.createElement("div",{className:"container"},c.a.createElement(F,null),c.a.createElement(f.d,null,c.a.createElement(f.b,{path:"/:userID",component:Q}),c.a.createElement(f.b,{exact:!0,path:"/",component:X})),c.a.createElement(G,null)))},V=function(){var e=Object(i.b)(),t=Object(n.useState)(!0),a=Object(s.a)(t,2),r=a[0],l=a[1],o=Object(n.useState)(!1),u=Object(s.a)(o,2),d=u[0],p=u[1];return Object(n.useEffect)((function(){m.a.auth().onAuthStateChanged((function(t){if(null===t||void 0===t?void 0:t.uid){var a=t.email.split("@")[0];e(C(t.uid,a,t.displayName,t.photoURL)),p(!0)}else p(!1);l(!1)}))}),[e]),r?c.a.createElement(c.a.Fragment,null):c.a.createElement(E.a,null,c.a.createElement("div",null,c.a.createElement(f.d,null,c.a.createElement(w,{path:"/login",isAuthenticated:d,component:_}),c.a.createElement(b,{path:"/",isAuthenticated:d,component:Z}),c.a.createElement(f.a,{to:"login"}))))},Y=a(13),$=a(34),ee={},te=a(23),ae={timeline:[]},ne="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Y.d,ce=Object(Y.c)({authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return{UserData:{UID:t.payload.uid,UserName:t.payload.userName,DisplayName:t.payload.displayName,PhotoURL:t.payload.photoURL}};case O:return{};default:return e}},tweetReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return{timeline:[t.payload].concat(Object(te.a)(e.timeline))};case L:return{timeline:t.payload};case x:return{timeline:[]};case R:return{timeline:[t.payload].concat(Object(te.a)(e.timeline))};case j:return e.timeline.find((function(e){return e.tweetUID===t.payload.tweetUID}))?e:{timeline:[t.payload].concat(Object(te.a)(e.timeline))};default:return e}}}),re=Object(Y.e)(ce,ne(Object(Y.a)($.a)));a(54);l.a.render(c.a.createElement(i.a,{store:re},c.a.createElement(V,null)),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.8726f5f7.chunk.js.map